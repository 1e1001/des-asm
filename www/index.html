<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>des-asm</title>
<style>
#c {
	display: flex;
	flex-direction: row;
	height: calc(100vh - 3em);
}
@media screen and (max-aspect-ratio: 1) {
	#c {
		flex-direction: column;
	}
}
textarea, #output {
	flex: 1 0 0%;
	resize: none;
}
</style>
</head>
<body>
<div id="c">
<textarea id="input"></textarea>
<div id="output"></div>
</div>
<button id="run">Compile</button>
<span id="err"></span>
<script src="https://www.desmos.com/api/v1.7/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
<script src="des_asm_web.js"></script>
<script>
window.asm_error = function(v) {
	err.innerText = v;
}
var calc = Desmos.GraphingCalculator(output, {
	keypad: false,
	// expressions: false,
	settingsMenu: false,

});
calc.setExpression({ id: 'pV', latex: 'v_{pV}=\\left[\\right]' });
calc.setExpression({ id: 'pC', latex: 'v_{pC}=\\left[\\right]' });
wasm_bindgen("des_asm_web_bg.wasm").then(function() {
	run.onclick = function() {
		try {
			var res = wasm_bindgen.compile(input.value, "desmos").split("\n");
			calc.setExpression({ id: 'pV', latex: res[0] });
			calc.setExpression({ id: 'pC', latex: res[1] });
		} catch (e) {
			console.error(e);
		}
	}
});
</script>
</body>
</html>
